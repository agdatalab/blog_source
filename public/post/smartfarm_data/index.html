<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>스마트팜 데이터의 이해 (1/3)</title>
<meta name="description" content="Connect Everything in Agriculture">
<meta name="generator" content="Hugo 0.40.2" />
<meta property="og:title" content="스마트팜 데이터의 이해 (1/3)" />
<meta property="og:description" content="Thumbnail 이미지 출처
스마트팜이란?농림수산식품교육문화정보원(EPIS, 이하 농정원)이 운영하는 SmartFarm Korea 에서 정의하는 스마트팜의 개념을 보면 스마트 온실, 스마트 과수원, 스마트 축사를 통틀어 스마트팜이라고 지칭하고 있다. 과거에 프리바 유리온실 모델과 같은 ICT 기반의 원예온실로 불리던 개념이 축산과 과수 농장까지 확대되면서 스마트팜이 개념으로 발전하였다.
스마트팜의 구성요소는 크게 현장의 환경정보와 영상정보를 수집하는 수집부, 수집된 데이터를 저장하고 필요한 형태로 가공/분석하는 저장부, 가공/분석된 정보를 이용하여 온실 관리에 필요한 정보를 표출하고 장비를 제어하는 활용부로 나눌 수 있다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/smartfarm_data/" />



<meta property="article:published_time" content="2018-04-16T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-04-16T00:00:00&#43;00:00"/>











<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700" type="text/css" media="all" />
<link rel="stylesheet" href="/css/style.css" type="text/css" media="all" />
<script type="text/javascript" src="/js/scripts.js"></script>
<link rel="shortcut icon" href="/favicon.ico">

</head>
<body class="body body-right-sidebar mobile" itemscope="itemscope" itemtype="http://schema.org/WebPage">
	<div class="container container-outer">
		<header class="header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
			<div class="container container-inner clearfix">
				<div class="logo" role="banner" itemscope="itemscope" itemtype="http://schema.org/Brand">
					<a class="logo__link" href="/" title="AgData Lab" rel="home">
						<h1 class="logo__title">AgData Lab</h1>
						<h2 class="logo__tagline">서울대학교 농업정보시스템 연구실</h2>
					</a>
				</div>
			</div>
			
<nav class="menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<ul class="menu__list">
		<li class="menu__item"><a class="menu__link" href="/about">ABOUT</a></li>
		<li class="menu__item"><a class="menu__link" href="/topic_categories">CATEGORIES</a></li>
		<li class="menu__item"><a class="menu__link" href="/paper_review">PAPER REVIEW</a></li>
		<li class="menu__item"><a class="menu__link" href="/news_scrap">NEWS SCRAP</a></li>
		<li class="menu__item"><a class="menu__link" href="/lab_activity">LAB ACTIVITY</a></li>
	</ul>
</nav>

		</header>
		<div class="wrapper clearfix">

<main class="main-content content" role="main" itemprop="mainContentOfPage">
	<article class="post">
		<header class="post__header clearfix">
			<h1 class="post__title">스마트팜 데이터의 이해 (1/3)</h1>
			<p class="post__meta meta">
				<svg class="icon icon-time" height="14" viewBox="0 0 16 16" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
				<time class="post__meta-date" datetime="2018-04-16T00:00:00">April 16, 2018</time>
				<span class="post__meta-categories meta-categories">
					<svg class="icon icon-category" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
					<a class="meta-categories__link" href="/categories/%ed%99%98%ea%b2%bd%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81%ea%b3%bc-%ec%a0%9c%ec%96%b4" rel="category">환경모니터링과 제어</a></span>
			</p>
		</header>
		<div class="post__content clearfix">
			<figure class="post__thumbnail">
				<img src="/img/smart_farm.jpg" alt="스마트팜 데이터의 이해 (1/3)">
			</figure>
			<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/pymjs/pym.v1.js"></script>
<script src="/rmarkdown-libs/widgetframe-binding/widgetframe.js"></script>


<p><a href="http://news.naver.com/main/read.nhn?mode=LSD&amp;mid=sec&amp;sid1=001&amp;oid=002&amp;aid=0002018644">Thumbnail 이미지 출처</a></p>
<hr />
<div class="section level4">
<h4>스마트팜이란?</h4>
<p>농림수산식품교육문화정보원(EPIS, 이하 농정원)이 운영하는 <a href="http://www.smartfarmkorea.net">SmartFarm Korea</a> 에서 정의하는 <a href="http://www.smartfarmkorea.net/contents/view.do?menuId=M01010102">스마트팜의 개념</a>을 보면 스마트 온실, 스마트 과수원, 스마트 축사를 통틀어 스마트팜이라고 지칭하고 있다. 과거에 프리바 유리온실 모델과 같은 ICT 기반의 원예온실로 불리던 개념이 축산과 과수 농장까지 확대되면서 스마트팜이 개념으로 발전하였다.</p>
<p>스마트팜의 구성요소는 크게 현장의 환경정보와 영상정보를 수집하는 수집부, 수집된 데이터를 저장하고 필요한 형태로 가공/분석하는 저장부, 가공/분석된 정보를 이용하여 온실 관리에 필요한 정보를 표출하고 장비를 제어하는 활용부로 나눌 수 있다.</p>
<ul>
<li>데이터 수집부 : 센서(환경정보), CCTV(영상), Node장비(데이터 일괄수집/전송)</li>
<li>데이터 저장부 : 클라우드 또는 기업 서버(수집데이터 저장 + 활용서비스로 데이터 송출)</li>
<li>데이터 활용부 : Node장비(개별 제어기로 데이터 전송), 제어기(창/Fan/CO2시비기 관수기,양액기,급이기), 어플리케이션(모니터링 및 분석 서비스)</li>
</ul>
<p>각각의 구성요소이 어떻게 연계되어 동작하는지를 한마디로 요약해보면 <em>“수집부에서 관찰된 외부환경의 상황을 저장부에서 최적 생육을 위한 조건에 부합하는지 판단하고 최적 조건이 될 수 있도록 하는 제어 신호를 다시 활용부의 제어기 Node장비로 전송하여 개별 제어기들이 최적 조건을 유지하도록 동작시키는 것”</em> 이다.</p>
<p>스마트팜 도입으로 인한 효과는 1) <strong>생산성 및 품질 향상</strong>, 2) <strong>위험상황 조기발견으로 피해 최소화</strong>, 3) <strong>모니터링을 위한 시간 절약으로 노동력 절감</strong> 을 기대할 수 있으나 스마트팜 설비를 갖추기 위한 투자비용을 회수하는데 필요한 시간은 운영을 어떻게 하는지에 따라 큰 차이가 날 수 있다.</p>
<p>정부에서 스마트팜의 개념을 정립하고 관련 정책을 도입된 것은 2014년으로 도입 첫해의 스마트팜 면적은 100ha 수준이었으나 2016년 말에는 19배 증가한 1912ha로 보고되어 매년 성장하고 있으나 <a href="http://www.nongup.net/news/articleView.html?idxno=8185">(출처)</a>, 아직까지는 정부 주도 정책 사업이 스마트팜 확산을 견인하는 단계로 자발적인 확산으로 이어지기 위해서는 보다 섬세한 정책 설계가 필요할 것으로 판단된다.</p>
<hr />
</div>
<div id="---" class="section level4">
<h4>스마트 온실 데이터를 살펴보자</h4>
<p>사용 데이터는 2014~2016년 3년간 진행된 농촌진흥청 <code>&quot;시설농업 ICT융합 운영활성화 모델 개발&quot;</code> 연구과제에서 수집된 스마트 온실의 환경 데이터로 해당 데이터는 농정원에서 운영하는 SmartFarm Korea에서 <a href="http://www.smartfarmkorea.net/front/open/list.do?menuId=M01060201">오픈API</a> 신청 후 사용이 가능하다.</p>
<p>이번 Post에서 사용하는 샘플 데이터는 수집 농가 중 파프리카 농가 1개소의 2015년 1년치의 데이터로 <a href="https://github.com/agdatalab/sample_data">Agdata Lab 저장소</a>에서 다운로드할 수 있다. 측정 주기는 1분 단위이고 14개의 환경요소를 측정하여 기록한 데이터이다.</p>
<p>먼저 csv파일을 읽어서 측정치 개수를 확인해보자. nrow()로 확인해본 결과 525,081개이다. 1년간 1분단위로 정확히 측정되었다면 <code>60분 x 24시간 x 365일 = 525,600개</code>의 측정치가 있어야 하는데 519개의 결측치가 있다. 이는 측정치가 기록된 시간이 예를들어 59분00초에 1개, 59분59초에 1개가 기록될 경우 하나의 측정치만 저장하기 때문에 발생한 결측치이다.</p>
<pre class="r"><code>dat &lt;- read.csv(&#39;env_min_spl.csv&#39;)
print(paste(&#39;number of observation :&#39;,nrow(dat)))</code></pre>
<pre><code>## [1] &quot;number of observation : 525081&quot;</code></pre>
<p>다음으로 측정된 변수를 확인해보자. 1~6번째 변수는 측정 시간과 관련된 변수들이고 7번째 변수부터 환경 요인을 의미하는 변수들이다.</p>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>##  [1] &quot;date&quot;    &quot;year&quot;    &quot;month&quot;   &quot;day&quot;     &quot;hour&quot;    &quot;minute&quot;  &quot;OTP&quot;    
##  [8] &quot;LTP&quot;     &quot;RTP&quot;     &quot;EVTP&quot;    &quot;LHM&quot;     &quot;RHM&quot;     &quot;EVHM&quot;    &quot;RAN&quot;    
## [15] &quot;CO2&quot;     &quot;INS&quot;     &quot;ACC_INS&quot; &quot;WD&quot;      &quot;WDS&quot;     &quot;LDTP&quot;</code></pre>
<p>각각의 의미는 다음과 같다.</p>
<pre><code>OTP(외부온도),  LTP(좌측내부온도),  RTP(우측내부온도),  EVTP(평균내부온도),   LHM(좌측내부습도),  RHM(우측내부습도),  EVHM(평균내부습도),   RAN(감우:강우유무),   CO2(내부CO2농도),   INS(일사량),  ACC_INS(누적일사량),  WD(풍향),   WDS(풍속),  LDTP(지면온도) </code></pre>
<p>엑셀이나 Rstudio로 dat 파일을 열어보면 다음과 같은 측정치가 기록된 데이터임을 확인할 수 있을 것이다.</p>
<div id="htmlwidget-1" style="width:100%;height:350px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"url":"/post/2018-04-16-smartfarm_data_files/figure-html//widgets/widget_show table.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
<p>이제 스마트 온실에서 측정된 환경 데이터가 어떤 형태인지는 파악되었을 것이다. 다음으로 분단위로 측정된 데이터를 60분간의 평균으로 시간단위 데이터로 변환해보자.</p>
<pre class="r"><code>dat_hour &lt;- dat[,c(1,5,7:19)] %&gt;% group_by(date,hour) %&gt;% summarise_all(funs(round(mean(.,na.rm=T),2)))
nrow(dat_hour)</code></pre>
<pre><code>## [1] 8760</code></pre>
<p>dat_hour 데이터 행의 개수는 8,760개로 dat의 525,800개 대비 확연히 줄었다 분단위 측정치를 시간단위로의 변환이 필요한 이유는 데이터의 크기 때문이다. 분단위 측정 데이터는 1개 농가의 1년치 데이터의 크기가 약 40MB이다. 1000개 농가 데이터를 5년간 수집하고 있다면 데이터 크기는 200GB이다. 하드디스크의 가격이 싸기 때문에 저장공간의 문제는 크지 않으나 Cloud DB에 저장된 데이터를 분석하기 위해 인터넷망으로 불러와야 하는 상황이라면 200GB를 다운로드하기 위해서는 많은 시간이 소요될 것이다. 200GB 분단위 데이터를 시간단위 데이터로 변환하면 <code>200 / 60 = 3.3GB</code> 60배 더 빠른 속도로 데이터를 받을 수 있다.</p>
<p>시간단위로 요약된 dat_hour는 다음과 같이 매 시간별로 분단위 60개의 측정치의 평균값으로 표현된다.</p>
<div id="htmlwidget-2" style="width:100%;height:350px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"url":"/post/2018-04-16-smartfarm_data_files/figure-html//widgets/widget_show table2.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
<hr />
<center>
<a href="/post/smartfarm_data2">NEXT : 스마트팜(ICT 기반 원예온실) 데이터의 이해 (2/3)</a>
</center>
<hr />
</div>

		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m4.73135 3.3795002q0-.5597-.39604-.9557-.39604-.3961-.95577-.3961-.55974 0-.95578.3961-.39604.396-.39604.9557 0 .5598.39604.9558.39604.3961.95578.3961.55973 0 .95577-.3961.39604-.396.39604-.9558zm11.26865 6.0832q0 .5596998-.39076.9504998l-5.18548 5.196q-.41188.3908-.9610504.3908-.55974 0-.9505-.3908l-7.5511496-7.5616998q-.40132-.3907-.68119-1.0666-.27987-.6759-.27987-1.2357v-4.3934q0-.54920004.40132-.95050004.40132-.4013.9505-.4013h4.39339q.55974 0 1.23565.2799.67591.2798 1.07723.6812l7.55115 7.54060004q.39076.4118.39076.961z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link" href="/tags/%EC%8A%A4%EB%A7%88%ED%8A%B8%ED%8C%9C/" rel="tag">스마트팜</a></li>
		<li class="tags__item"><a class="tags__link" href="/tags/%EB%B9%85%EB%8D%B0%EC%9D%B4%ED%84%B0/" rel="tag">빅데이터</a></li>
		<li class="tags__item"><a class="tags__link" href="/tags/%ED%99%98%EA%B2%BD-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81/" rel="tag">환경 모니터링</a></li>
	</ul>
</div>

	</article>
	

<div class="authorbox clearfix">

  

    

	

		<figure class="authorbox__avatar">

			<img alt="장박 avatar" src="/img/jangbak.jpg" class="avatar" height="90" width="90">

		</figure>

		<div class="authorbox__header">

			<span class="authorbox__name">About 장박</span>

		</div>

		<div class="authorbox__description">

			장박은 농업정보시스템 연구실에서 오랜시간 숙성되고 있는 농업데이터사이언티스트이다.

		</div>

	

  

</div>


	
<nav class="post-nav row clearfix" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
	<div class="post-nav__item post-nav__item--prev col-1-2">
		<a class="post-nav__link" href="/post/2015-07-23-r-rmarkdown/" rel="prev"><span class="post-nav__caption">«Previous</span><p class="post-nav__post-title">Hello R Markdown</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next col-1-2">
		<a class="post-nav__link" href="/post/smartfarm_data2/" rel="next"><span class="post-nav__caption">Next»</span><p class="post-nav__post-title">스마트팜 데이터의 이해 (2/2)</p></a>
	</div>
</nav>

	
</main>

<aside class="sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	
<div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="//google.com/search">
		<label>
			<span class="screen-reader-text">Search for:</span>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="/" />
	</form>
</div>
	
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/post/orgin_intnl_ad/">원산지정보와 국제광고(랩스터디)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/ict_convergence_tech_ppt/">농식품 분야 ICT 융합 해외 최신 기술 동향 (2014.5.15)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/glm_ach/">GLM을 이용한 대학학업 성취도 분석 (랩스터디)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/env_cont_energy_reduce/">온실환경 관리대상과 에너지 절감 요소</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/dl_cnn/">Deep Learning &amp; Convolutional Neural Network (랩세미나)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/smartfarm_data3/">스마트팜 데이터의 이해 (3/3)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/new_fujitsu_ai/">후지쯔와 큐슈대학, 농업생산을 위한 AI 공동연구</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/smartfarm_data2/">스마트팜 데이터의 이해 (2/2)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/smartfarm_data/">스마트팜 데이터의 이해 (1/3)</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/2015-07-23-r-rmarkdown/">Hello R Markdown</a></li>
		</ul>
	</div>
</div>

	
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/categories/%ea%b3%bc%ed%95%99%ea%b3%bc-%ea%b8%b0%ec%88%a0">과학과-기술</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%ea%b8%b0%ed%83%80%eb%b0%9c%ed%91%9c%ec%9e%90%eb%a3%8c">기타발표자료</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%eb%85%bc%eb%ac%b8%eb%a6%ac%eb%b7%b0">논문리뷰</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%eb%89%b4%ec%8a%a4-%ec%8a%a4%ed%81%ac%eb%9e%a9">뉴스-스크랩</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%eb%9e%a9%ec%84%b8%eb%af%b8%eb%82%98">랩세미나</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%eb%9e%a9%ec%8a%a4%ed%84%b0%eb%94%94">랩스터디</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/%ed%99%98%ea%b2%bd%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81%ea%b3%bc-%ec%a0%9c%ec%96%b4">환경모니터링과-제어</a></li>
		</ul>
	</div>
</div>
	

	
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget__link widget__link--taglist" href="/tags/ai" title="ai">ai</a>
		<a class="widget__link widget__link--taglist" href="/tags/convolutional-neural-network" title="convolutional-neural-network">convolutional-neural-network</a>
		<a class="widget__link widget__link--taglist" href="/tags/deep-learning" title="deep-learning">deep-learning</a>
		<a class="widget__link widget__link--taglist" href="/tags/glm" title="glm">glm</a>
		<a class="widget__link widget__link--taglist" href="/tags/manova" title="manova">manova</a>
		<a class="widget__link widget__link--taglist" href="/tags/plot" title="plot">plot</a>
		<a class="widget__link widget__link--taglist" href="/tags/r-markdown" title="r-markdown">r-markdown</a>
		<a class="widget__link widget__link--taglist" href="/tags/regression" title="regression">regression</a>
		<a class="widget__link widget__link--taglist" href="/tags/%eb%b9%85%eb%8d%b0%ec%9d%b4%ed%84%b0" title="빅데이터">빅데이터</a>
		<a class="widget__link widget__link--taglist" href="/tags/%ec%83%9d%ec%9c%a1%eb%aa%a8%eb%8d%b8" title="생육모델">생육모델</a>
		<a class="widget__link widget__link--taglist" href="/tags/%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8c%9c" title="스마트팜">스마트팜</a>
		<a class="widget__link widget__link--taglist" href="/tags/%ed%99%98%ea%b2%bd-%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81" title="환경-모니터링">환경-모니터링</a>
	</div>
</div>
</aside>

	</div>
		<footer class="footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
			<div class="container container-inner">
				<p class="footer__copyright">&copy; 2018 AgData Lab. <span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad theme</a>.</span></p>
			</div>
		</footer>
	</div>

<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
	});
</script>
</body>
</html>
